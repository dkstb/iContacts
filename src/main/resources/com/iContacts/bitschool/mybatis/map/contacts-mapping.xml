<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
                                        
<mapper namespace="com.iContacts.bitschool.dao.ContactsDao">

	<resultMap type="com.iContacts.bitschool.domain.Contacts" id="contactsSelectMap">
		<result property="id" 		column="contact_id" jdbcType="INTEGER" />
		<result property="userId"	column="user_id"	jdbcType="INTEGER" />
		<result property="name" 	column="name" 		jdbcType="VARCHAR" />
		<result property="phoneNum" column="phone_num" 	jdbcType="VARCHAR" />
		<result property="email" 	column="email" 		jdbcType="VARCHAR" />
		<result property="work" 	column="work" 		jdbcType="VARCHAR" />
		<result property="homeAddr" column="home_addr"	jdbcType="VARCHAR" />
		<result property="webPage" 	column="web_page"	jdbcType="VARCHAR" />
		<result property="memo" 	column="memo" 		jdbcType="VARCHAR" />
	</resultMap>

	<!-- Create Contacts -->
	<insert id="insertContacts" parameterType="com.iContacts.bitschool.domain.Contacts"
		useGeneratedKeys="true" keyProperty="id">
		INSERT INTO CONTACT ( user_id, name, phone_num, email, work, home_addr, web_page, memo )
		VALUES ( #{userId}, #{name}, #{phoneNum}, #{email}, #{work}, #{homeAddr}, #{webPage}, #{memo} )
	</insert>

	<!-- Read ContactsList -->
	<select id="getContactsList" resultMap="contactsSelectMap"
		parameterType="com.iContacts.bitschool.domain.Contacts">
		SELECT name, contact_id FROM CONTACT
		WHERE user_id = #{userId}
	</select>
	
	<!-- Read 상세 주소 (클릭) -->
	<select id="getContact" resultMap="contactsSelectMap" 
	parameterType="com.iContacts.bitschool.domain.Contacts">
		SELECT * FROM CONTACT
		WHERE contact_id = #{id}
	</select>

	<!-- Update Contacts -->
	<update id="updateContacts" parameterType="com.iContacts.bitschool.domain.Contacts">
		UPDATE CONTACT
		SET name=#{name}, phone_num=#{phoneNum}, email=#{email}, work=#{work}, home_addr=#{homeAddr}, web_page=#{webPage}, memo=#{memo}
		WHERE contact_id = #{id}
	</update>

	<!-- Delete Contacts -->
	<delete id="deleteContacts" parameterType="com.iContacts.bitschool.domain.Contacts">
		DELETE
		FROM CONTACT
		WHERE contact_id = #{id}
	</delete>

	<!-- 전체 유저 삭제(테스트용) -->
	<delete id="deleteAllContacts">
		DELETE FROM CONTACT
	</delete>

</mapper>